function randomRange(a,b){return Math.random()*(b-a)+a}var TO_RADIANS,mobileMenuOutsideClick,_ctx=$("meta[name='_ctx']").attr("content");_ctx=_ctx.substr(0,_ctx.length-1),$(function(){$(".main").css("min-height",$(window).height()-50+"px"),$("#wechatCode").click(function(){$("#myWechatCode").modal("show")}),$("[data-toggle='tooltip']").tooltip(),$("#fh5co-main-menu ul li:eq(3)").addClass("fh5co-active"),mobileMenuOutsideClick()}),Particle3D=function(a){THREE.Particle.call(this,a),this.velocity=new THREE.Vector3(0,-2,0),this.velocity.rotateX(randomRange(-45,45)),this.velocity.rotateY(randomRange(0,360)),this.gravity=new THREE.Vector3(0,0,0),this.drag=1},Particle3D.prototype=new THREE.Particle,Particle3D.prototype.constructor=Particle3D,Particle3D.prototype.updatePhysics=function(){this.velocity.multiplyScalar(this.drag),this.velocity.addSelf(this.gravity),this.position.addSelf(this.velocity)},TO_RADIANS=Math.PI/180,THREE.Vector3.prototype.rotateY=function(a){cosRY=Math.cos(a*TO_RADIANS),sinRY=Math.sin(a*TO_RADIANS);var b=this.z,c=this.x;this.x=c*cosRY+b*sinRY,this.z=c*-sinRY+b*cosRY},THREE.Vector3.prototype.rotateX=function(a){cosRY=Math.cos(a*TO_RADIANS),sinRY=Math.sin(a*TO_RADIANS);var b=this.z,c=this.y;this.y=c*cosRY+b*sinRY,this.z=c*-sinRY+b*cosRY},THREE.Vector3.prototype.rotateZ=function(a){cosRY=Math.cos(a*TO_RADIANS),sinRY=Math.sin(a*TO_RADIANS);var b=this.x,c=this.y;this.y=c*cosRY+b*sinRY,this.x=c*-sinRY+b*cosRY},$(function(){function init(){var a,b;for(camera=new THREE.PerspectiveCamera(75,containerWidth/containerHeight,1,1e4),camera.position.z=1e3,scene=new THREE.Scene,scene.add(camera),renderer=new THREE.CanvasRenderer,renderer.setSize(containerWidth,containerHeight),a=new THREE.ParticleBasicMaterial({map:new THREE.Texture(particleImage)}),b=0;snowNum>b;b++)particle=new Particle3D(a),particle.position.x=2e3*Math.random()-1e3,particle.position.y=2e3*Math.random()-1e3,particle.position.z=2e3*Math.random()-1e3,particle.scale.x=particle.scale.y=1,scene.add(particle),particles.push(particle);container.appendChild(renderer.domElement),window.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("touchstart",onDocumentTouchStart,!1),window.addEventListener("touchmove",onDocumentTouchMove,!1),setInterval(loop,25)}function onDocumentMouseMove(a){mouseX=a.clientX-windowHalfX,mouseY=a.clientY-windowHalfY}function onDocumentTouchStart(a){1==a.touches.length&&(mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}function onDocumentTouchMove(a){1==a.touches.length&&(mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}function loop(){var i,particle;for(i=0;i<particles.length;i++)with(particle=particles[i],particle.updatePhysics(),particle.position)-1e3>y&&(y+=2e3),x>1e3?x-=2e3:-1e3>x&&(x+=2e3),z>1e3?z-=2e3:-1e3>z&&(z+=2e3);camera.position.x+=.005*(mouseX-camera.position.x),camera.position.y+=.005*(-mouseY-camera.position.y),camera.lookAt(scene.position),renderer.render(scene,camera)}var containerWidth,containerHeight,particle,camera,scene,renderer,mouseX,mouseY,windowHalfX,windowHalfY,particles,particleImage,snowNum,container=document.querySelector(".mysnow");/MSIE 6|MSIE 7|MSIE 8/.test(navigator.userAgent)||(/MSIE 9|MSIE 10/.test(navigator.userAgent)&&$(container).css("height",$(window).height()).bind("click",function(){$(this).fadeOut(1e3,function(){$(this).remove()})}),containerWidth=$(container).width(),containerHeight=$(container).height(),mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,particles=[],particleImage=new Image,particleImage.src="/images/snow1.png",snowNum=500,init())}),mobileMenuOutsideClick=function(){$(".js-fh5co-nav-toggle").on("click",function(a){a.preventDefault();var b=$(this);$("body").hasClass("offcanvas")?(b.removeClass("active"),$("body").removeClass("offcanvas")):(b.addClass("active"),$("body").addClass("offcanvas"))}),$(document).click(function(a){var b=$("#fh5co-aside, .js-fh5co-nav-toggle");b.is(a.target)||0!==b.has(a.target).length||$("body").hasClass("offcanvas")&&($("body").removeClass("offcanvas"),$(".js-fh5co-nav-toggle").removeClass("active"))}),$(window).scroll(function(){$("body").hasClass("offcanvas")&&($("body").removeClass("offcanvas"),$(".js-fh5co-nav-toggle").removeClass("active"))})};