!function(a){a.fn.qqFace=function(b){var c={id:"facebox",path:"face/",assign:"content",tip:"em_"},d=a.extend(c,b),e=a("#"+d.assign),f=d.id,g=d.path,h=d.tip;return e.length<=0?(alert("缺少表情赋值对象。"),!1):(a(this).click(function(b){var c,e,i,j,k;if(a("#"+f).length<=0){for(c='<div id="'+f+'" style="position:absolute;display:none;z-index:1000;" class="qqFace">'+'<table border="0" cellspacing="0" cellpadding="0"><tr>',i=1;75>=i;i++)e="["+h+i+"]",c+='<td><img src="'+g+i+'.gif" onclick="$(\'#'+d.assign+"').setCaret();$('#"+d.assign+"').insertAtCaret('"+e+"');\" /></td>",0==i%15&&(c+="</tr><tr>");c+="</tr></table></div>"}a(this).parent().append(c),j=a(this).position(),k=j.top+a(this).outerHeight(),a("#"+f).css("top",k),a("#"+f).css("left",j.left),a("#"+f).show(),b.stopPropagation()}),a(document).click(function(){a("#"+f).hide(),a("#"+f).remove()}),void 0)}}(jQuery),jQuery.extend({unselectContents:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}}),jQuery.fn.extend({selectContents:function(){$(this).each(function(a){var c,d,e,f,b=this;(e=b.ownerDocument)&&(f=e.defaultView)&&"undefined"!=typeof f.getSelection&&"undefined"!=typeof e.createRange&&(c=window.getSelection())&&"undefined"!=typeof c.removeAllRanges?(d=e.createRange(),d.selectNode(b),0==a&&c.removeAllRanges(),c.addRange(d)):document.body&&"undefined"!=typeof document.body.createTextRange&&(d=document.body.createTextRange())&&(d.moveToElementText(b),d.select())})},setCaret:function(){if($.support.msie){var a=function(){var a=$(this).get(0);a.caretPos=document.selection.createRange().duplicate()};$(this).click(a).select(a).keyup(a)}},insertAtCaret:function(a){var c,d,e,f,g,h,b=$(this).get(0);document.all&&b.createTextRange&&b.caretPos?(c=b.caretPos,c.text=""==c.text.charAt(c.text.length-1)?a+"":a):b.setSelectionRange?(d=b.selectionStart,e=b.selectionEnd,f=b.value.substring(0,d),g=b.value.substring(e),b.value=f+a+g,b.focus(),h=a.length,b.setSelectionRange(d+h,d+h),b.blur()):b.value+=a}});