"use strict";!function(e){function i(e){for(var i="",t=0;t<e.length;t++)i=i+"<span for='"+e[t].code+"emoji' class='emoji-btn'>"+e[t].name+"</span>";return"<div class='emoji-btn-box'>"+i+"</div>"}function t(e){for(var i="",t=1;t<=e.max_number;t++)i=i+"<li class='emoji-li' alt='["+e.code+t+"]'><img src='"+e.path+t+e.suffix+"' style='max-width:24px;'/></li>";return"<ul class='emoji-ul' id='"+e.code+"emoji'>"+i+"</ul>"}e.fn.emoji=function(o){var s={content_el:"#content",list:[{name:"QQ表情",code:"qq_",path:"./face/emoji1/",suffix:".gif",max_number:75},{name:"emoji表情",code:"em_",path:"./face/emoji2/",suffix:".png",max_number:52}]},o=e.extend(s,o),n=o.list,m=o.content_el;e(this).click(function(o){if(!(e(".emoji-box").length<=0))return e(".emoji-box").hide(),e("em.tip").hide(),e("em.tip2").hide(),e(".emoji-box").remove(),e("em.tip").remove(),e("em.tip2").remove(),!1;for(var s=i(n),c="",l=0;l<n.length;l++)c+=t(n[l]);var h="<div class='emoji-box'>"+s+c+"</div><em class='tip'></em><em class='tip2'></em>";e(this).parent().append(h),e(this).parent().find(".emoji-btn-box span").click(function(){var i=e(this).attr("for");return e("ul.emoji-ul").hide(),e("#"+i).show(),e(".emoji-box>.emoji-btn-box>span").css("color","#ccc"),e(this).css("color","blue"),!1}),e(this).parent().find(".emoji-li").click(function(){var i=e(this).attr("alt"),t=e(m).val();return e(m).val(t+i),!1}),console.log("wh",e(window).height()),console.log("dh",e(document).height()),console.log("sh",e(document).scrollTop()),console.log("posision",e(this).position()),console.log("th",e(".emoji-box").height());var r=e(document).height();e("ul.emoji-ul").hide(),e(".emoji-box>.emoji-btn-box>span").first().css("color","blue"),e("#"+n[0].code+"emoji").show();var p=e(this).position();p.top+300>r?(e(".emoji-box").css("top",p.top-220-e(this).height()),e(".emoji-box").css("left",p.left),e(this).parent().find("em.tip").css("left",-1e3),e(this).parent().find("em.tip2").css("left",-1e3)):(e(".emoji-box").css("top",p.top+e(this).height()),e(".emoji-box").css("left",p.left),e(this).parent().find("em.tip").css("top",p.top+e(this).height()-20),e(this).parent().find("em.tip").css("left",p.left+10),e(this).parent().find("em.tip2").css("top",p.top+e(this).height()-19),e(this).parent().find("em.tip2").css("left",p.left+10)),o.stopPropagation()}),e(document).click(function(){e(".emoji-box").hide(),e("em.tip").hide(),e("em.tip2").hide(),e(".emoji-box").remove(),e("em.tip").remove(),e("em.tip2").remove()})}}(jQuery);